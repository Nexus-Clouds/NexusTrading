<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus Trading Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <!-- Chart.js library for interactive charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            background-color: #0d0d1a;
            color: #e0e0e0;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #1a202c;
        }

        ::-webkit-scrollbar-thumb {
            background: #4f46e5;
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #6366f1;
        }

        /* Keyframe Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes glow {
            0% { box-shadow: 0 0 5px #6366f1, 0 0 10px #6366f1; }
            50% { box-shadow: 0 0 20px #6366f1, 0 0 30px #6366f1; }
            100% { box-shadow: 0 0 5px #6366f1, 0 0 10px #6366f1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        @keyframes gridFadeIn {
            from { opacity: 0; transform: scale(.9); }
            to { opacity: .05; transform: scale(1); }
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(.95); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes modalFadeOut {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(.95); }
        }

        /* New animations for alert messages */
        @keyframes messageFadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes messageFadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(20px); }
        }

        /* Utility Classes for Animations */
        .animate-fade-in { animation: fadeIn 1s ease-out forwards; }
        .animate-fade-in-up { animation: fadeInUp .8s ease-out forwards; }
        .delay-100 { animation-delay: .1s; }
        .delay-200 { animation-delay: .2s; }
        .delay-300 { animation-delay: .3s; }
        .delay-400 { animation-delay: .4s; }
        .delay-500 { animation-delay: .5s; }
        .delay-600 { animation-delay: .6s; }

        .glow-on-hover:hover { animation: glow 1.5s infinite alternate; }

        /* Animated elements for Intersection Observer */
        .animated-element {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity .8s ease-out, transform .8s ease-out;
        }

        .animated-element.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        .animated-element.delay-100 { transition-delay: .1s; }
        .animated-element.delay-200 { transition-delay: .2s; }
        .animated-element.delay-300 { transition-delay: .3s; }
        .animated-element.delay-400 { transition-delay: .4s; }
        .animated-element.delay-500 { transition-delay: .5s; }
        .animated-element.delay-600 { transition-delay: .6s; }

        /* Background Grid Pattern */
        .grid-bg-pattern {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(to right, rgba(255,255,255,.05) 1px, transparent 1px),
                              linear-gradient(to bottom, rgba(255,255,255,.05) 1px, transparent 1px);
            background-size: 40px 40px;
            opacity: .05;
            animation: pulse 8s infinite ease-in-out;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,.75);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn .3s ease-out forwards;
        }

        .modal-content {
            background-color: #1a202c;
            padding: 2.5rem;
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0,0,0,.5);
            width: 90%;
            max-width: 450px;
            position: relative;
            animation: modalFadeIn .3s ease-out forwards;
            border: 1px solid #4f46e5;
        }

        .modal-content.closing {
            animation: modalFadeOut .3s ease-out forwards;
        }

        .modal-close-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #e0e0e0;
            cursor: pointer;
            transition: color .2s;
        }

        .modal-close-button:hover {
            color: #ff4d4d;
        }

        /* Input Glow Effect */
        .input-glow:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(79,70,229,.5);
            border-color: #6366f1;
        }

        /* Message Box Animations */
        .message-box-animate-in { animation: messageFadeIn 0.3s ease-out forwards; }
        .message-box-animate-out { animation: messageFadeOut 0.5s ease-out forwards; }

        /* Fullscreen Chart Specific Styles */
        .fullscreen-chart-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #0d0d1a; /* Dark background for full screen */
            z-index: 10000; /* Ensure it's on top */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }

        .fullscreen-chart-container canvas {
            width: 100% !important;
            height: 100% !important;
            max-width: 100%;
            max-height: 100%;
        }

        /* Responsive Adjustments */
        @media (max-width: 767px) {
            .text-5xl { font-size: 3rem; }
            .text-7xl { font-size: 4rem; }
            .py-3 { padding-top: .75rem; padding-bottom: .75rem; }
            .px-8 { padding-left: 1.5rem; padding-right: 1.5rem; }
            .space-x-4 > *:not([hidden]) ~ *:not([hidden]) { margin-left: 1rem; }
            .modal-content { padding: 1.5rem; }
            .fullscreen-chart-container {
                padding: 0.5rem; /* Less padding on small screens */
            }
        }
    </style>
</head>
<body class="bg-gray-950">
    <!-- Navbar -->
    <nav id="navbar" class="fixed w-full z-50 transition-all duration-300 bg-transparent">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center">
                <img src="https://placehold.co/32x32/4f46e5/ffffff?text=N" alt="Nexus Logo" class="h-8 w-8 mr-2 rounded-md">
                <span class="text-white text-2xl font-bold tracking-wider">Nexus</span>
            </div>
            <div class="hidden md:flex space-x-8">
                <a href="#home" class="text-gray-300 hover:text-indigo-400 transition-colors duration-200 text-lg font-medium">Home</a>
                <a href="#features" class="text-gray-300 hover:text-indigo-400 transition-colors duration-200 text-lg font-medium">Features</a>
                <a href="#platforms" class="text-gray-300 hover:text-indigo-400 transition-colors duration-200 text-lg font-medium">Platforms</a>
                <a href="#about" class="text-gray-300 hover:text-indigo-400 transition-colors duration-200 text-lg font-medium">About Us</a>
                <a href="#contact" class="text-gray-300 hover:text-indigo-400 transition-colors duration-200 text-lg font-medium">Contact</a>
            </div>
            <div class="md:hidden">
                <button id="mobile-menu-button" class="text-gray-300 hover:text-indigo-400 focus:outline-none focus:text-indigo-400">
                    <svg id="menu-icon-open" class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                    <svg id="menu-icon-close" class="h-8 w-8 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="md:hidden hidden bg-gray-900/95 backdrop-blur-sm pb-4">
            <div class="flex flex-col items-center space-y-4">
                <a href="#home" class="block text-gray-300 hover:text-indigo-400 py-2 text-lg font-medium mobile-menu-link">Home</a>
                <a href="#features" class="block text-gray-300 hover:text-indigo-400 py-2 text-lg font-medium mobile-menu-link">Features</a>
                <a href="#platforms" class="block text-gray-300 hover:text-indigo-400 py-2 text-lg font-medium mobile-menu-link">Platforms</a>
                <a href="#about" class="block text-gray-300 hover:text-indigo-400 py-2 text-lg font-medium mobile-menu-link">About Us</a>
                <a href="#contact" class="block text-gray-300 hover:text-indigo-400 py-2 text-lg font-medium">Contact</a>
            </div>
        </div>
    </nav>

    <main id="main-content">
        <!-- Home Section -->
        <section id="home" class="relative h-screen flex items-center justify-center text-center text-white overflow-hidden bg-gray-950">
            <div class="absolute inset-0 z-0 overflow-hidden">
                <div class="grid-bg-pattern animate-grid-fade-in"></div>
                <div class="absolute inset-0 bg-gradient-to-br from-gray-950/70 via-transparent to-gray-900/70"></div>
            </div>
            <div class="relative z-10 p-4 max-w-4xl mx-auto">
                <h1 class="text-5xl md:text-7xl font-extrabold leading-tight mb-6 animate-fade-in-up">
                    <span class="text-indigo-400">Nexus</span> Your Gateway to Advanced Trading
                </h1>
                <p class="text-lg md:text-xl text-gray-300 mb-8 animate-fade-in-up delay-200">
                    Unify your crypto and traditional finance trading across multiple platforms with cutting-edge tools and insights.
                </p>
                <div class="flex justify-center space-x-4 animate-fade-in-up delay-400">
                    <button id="get-started-button" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300 ease-in-out glow-on-hover">
                        Get Started
                    </button>
                    <button id="learn-more-button" class="bg-transparent border-2 border-indigo-600 text-indigo-400 font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300 ease-in-out hover:bg-indigo-600 hover:text-white">
                        Learn More
                    </button>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="py-20 bg-gray-950 relative z-10">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl font-bold text-center text-white mb-12 animated-element">Key Features</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="bg-gray-900 p-8 rounded-xl shadow-xl border border-gray-800 transform hover:scale-105 transition-transform duration-300 animated-element delay-100">
                        <div class="text-indigo-400 mb-4">
                            <svg class="h-12 w-12" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                        </div>
                        <h3 class="text-2xl font-semibold text-white mb-4">Unified Dashboard</h3>
                        <p class="text-gray-400">Manage all your assets and trades from a single, intuitive interface. Say goodbye to juggling multiple platforms.</p>
                    </div>
                    <div class="bg-gray-900 p-8 rounded-xl shadow-xl border border-gray-800 transform hover:scale-105 transition-transform duration-300 animated-element delay-200">
                        <div class="text-indigo-400 mb-4">
                            <svg class="h-12 w-12" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
                        </div>
                        <h3 class="text-2xl font-semibold text-white mb-4">Advanced Analytics</h3>
                        <p class="text-gray-400">Gain deep insights into market trends, portfolio performance, and trading strategies with powerful analytics tools.</p>
                    </div>
                    <div class="bg-gray-900 p-8 rounded-xl shadow-xl border border-gray-800 transform hover:scale-105 transition-transform duration-300 animated-element delay-300">
                        <div class="text-indigo-400 mb-4">
                            <svg class="h-12 w-12" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.592 1L21 12l-4.408 3.592c-.511.582-1.48.908-2.592.908-2.626 0-4.5-1.254-4.5-3.5S9.374 8 12 8z"></path></svg>
                        </div>
                        <h3 class="text-2xl font-semibold text-white mb-4">Secure & Reliable</h3>
                        <p class="text-gray-400">Your security is our priority. Benefit from enterprise-grade security measures and robust infrastructure.</p>
                    </div>
                    <div class="bg-gray-900 p-8 rounded-xl shadow-xl border border-gray-800 transform hover:scale-105 transition-transform duration-300 animated-element delay-400">
                        <div class="text-indigo-400 mb-4">
                            <svg class="h-12 w-12" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18v-9"></path></svg>
                        </div>
                        <h3 class="text-2xl font-semibold text-white mb-4">Global Access</h3>
                        <p class="text-gray-400">Access markets and platforms worldwide, breaking down geographical barriers for your trading ambitions.</p>
                    </div>
                    <div class="bg-gray-900 p-8 rounded-xl shadow-xl border border-gray-800 transform hover:scale-105 transition-transform duration-300 animated-element delay-500">
                        <div class="text-indigo-400 mb-4">
                            <svg class="h-12 w-12" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
                        </div>
                        <h3 class="text-2xl font-semibold text-white mb-4">24/7 Support</h3>
                        <p class="text-gray-400">Our dedicated support team is available around the clock to assist you with any queries or issues.</p>
                    </div>
                    <div class="bg-gray-900 p-8 rounded-xl shadow-xl border border-gray-800 transform hover:scale-105 transition-transform duration-300 animated-element delay-600">
                        <div class="text-indigo-400 mb-4">
                            <svg class="h-12 w-12" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>
                        </div>
                        <h3 class="text-2xl font-semibold text-white mb-4">API Integration</h3>
                        <p class="text-gray-400">Seamlessly connect your existing trading bots and custom strategies via our robust API.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Platforms Section -->
        <section id="platforms" class="py-20 bg-gray-900 relative z-10">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl font-bold text-center text-white mb-12 animated-element">Supported Platforms</h2>
                <p class="text-lg text-gray-300 text-center mb-10 animated-element delay-100">
                    Nexus seamlessly integrates with leading financial and cryptocurrency platforms, providing you with a unified trading experience.
                </p>
                <div class="flex flex-wrap justify-center items-center gap-8 md:gap-12">
                    <div class="flex flex-col items-center p-4 bg-gray-800 rounded-lg shadow-md transform hover:scale-105 transition-transform duration-300 animated-element delay-200">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/12/Binance_logo.svg/1200px-Binance_logo.svg.png" alt="Binance Logo" class="h-16 w-16 object-contain mb-2" onerror="this.onerror=null;this.src='https://placehold.co/64x64/4f46e5/ffffff?text=BINANCE';">
                        <span class="text-white text-lg font-medium">Binance</span>
                    </div>
                    <div class="flex flex-col items-center p-4 bg-gray-800 rounded-lg shadow-md transform hover:scale-105 transition-transform duration-300 animated-element delay-300">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/Bybit_logo.svg/1200px-Bybit_logo.svg.png" alt="Bybit Logo" class="h-16 w-16 object-contain mb-2" onerror="this.onerror=null;this.src='https://placehold.co/64x64/4f46e5/ffffff?text=BYBIT';">
                        <span class="text-white text-lg font-medium">Bybit</span>
                    </div>
                    <div class="flex flex-col items-center p-4 bg-gray-800 rounded-lg shadow-md transform hover:scale-105 transition-transform duration-300 animated-element delay-400">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/MetaMask_Fox.svg/1200px-MetaMask_Fox.svg.png" alt="MetaMask Logo" class="h-16 w-16 object-contain mb-2" onerror="this.onerror=null;this.src='https://placehold.co/64x64/4f46e5/ffffff?text=METAMASK';">
                        <span class="text-white text-lg font-medium">MetaMask</span>
                    </div>
                    <div class="flex flex-col items-center p-4 bg-gray-800 rounded-lg shadow-md transform hover:scale-105 transition-transform duration-300 animated-element delay-500">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Trust_Wallet_logo.svg/1200px-Trust_Wallet_logo.svg.png" alt="Trust Wallet Logo" class="h-16 w-16 object-contain mb-2" onerror="this.onerror=null;this.src='https://placehold.co/64x64/4f46e5/ffffff?text=TRUST';">
                        <span class="text-white text-lg font-medium">Trust Wallet</span>
                    </div>
                    <div class="flex flex-col items-center p-4 bg-gray-800 rounded-lg shadow-md transform hover:scale-105 transition-transform duration-300 animated-element delay-600">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/4/4b/Coinbase_logo.png" alt="Coinbase Logo" class="h-16 w-16 object-contain mb-2" onerror="this.onerror=null;this.src='https://placehold.co/64x64/4f46e5/ffffff?text=COINBASE';">
                        <span class="text-white text-lg font-medium">Coinbase</span>
                    </div>
                    <div class="flex flex-col items-center p-4 bg-gray-800 rounded-lg shadow-md transform hover:scale-105 transition-transform duration-300 animated-element delay-700">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7f/Kraken_exchange_logo.svg/1200px-Kraken_exchange_logo.svg.png" alt="Kraken Logo" class="h-16 w-16 object-contain mb-2" onerror="this.onerror=null;this.src='https://placehold.co/64x64/4f46e5/ffffff?text=KRAKEN';">
                        <span class="text-white text-lg font-medium">Kraken</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="py-20 bg-gray-950 relative z-10">
            <div class="container mx-auto px-4 text-white">
                <h2 class="text-4xl font-bold text-center mb-12 animated-element">About Nexus</h2>
                <div class="max-w-3xl mx-auto text-lg text-gray-300 space-y-6 animated-element delay-100">
                    <p>Nexus was founded on the principle of empowering traders with unparalleled control and insight. In a rapidly evolving financial landscape, managing disparate accounts and platforms can be cumbersome and inefficient. We envisioned a solution that brings everything under one roof, providing a seamless, secure, and intelligent trading environment.</p>
                    <p>Our team comprises seasoned financial experts, blockchain innovators, and software engineers dedicated to building the future of trading. We are committed to continuous innovation, ensuring Nexus remains at the forefront of technology and user experience.</p>
                    <p>Join the Nexus community and experience the next generation of trading â€“ where complexity is simplified, and opportunities are amplified.</p>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-20 bg-gray-900 relative z-10">
            <div class="container mx-auto px-4 text-white">
                <h2 class="text-4xl font-bold text-center mb-12 animated-element">Contact Us</h2>
                <div class="max-w-2xl mx-auto bg-gray-800 p-8 rounded-xl shadow-xl border border-gray-700 animated-element delay-100">
                    <form class="space-y-6">
                        <div>
                            <label for="name" class="block text-gray-300 text-sm font-bold mb-2">Name</label>
                            <input type="text" id="name" name="name" class="shadow appearance-none border border-gray-700 rounded-lg w-full py-3 px-4 text-gray-200 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-700 input-glow" placeholder="Your Name" />
                        </div>
                        <div>
                            <label for="email" class="block text-gray-300 text-sm font-bold mb-2">Email</label>
                            <input type="email" id="email" name="email" class="shadow appearance-none border border-gray-700 rounded-lg w-full py-3 px-4 text-gray-200 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-700 input-glow" placeholder="your@example.com" />
                        </div>
                        <div>
                            <label for="message" class="block text-gray-300 text-sm font-bold mb-2">Message</label>
                            <textarea id="message" name="message" rows="5" class="shadow appearance-none border border-gray-700 rounded-lg w-full py-3 px-4 text-gray-200 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-700 input-glow" placeholder="Your message..."></textarea>
                        </div>
                        <div class="text-center">
                            <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300 ease-in-out glow-on-hover">
                                Send Message
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-950 py-10 text-gray-400 text-center relative z-10">
        <div class="container mx-auto px-4">
            <div class="flex justify-center items-center mb-4">
                <img src="https://placehold.co/32x32/4f46e5/ffffff?text=N" alt="Nexus Logo" class="h-6 w-6 mr-2 rounded-md">
                <span class="text-white text-xl font-bold tracking-wider">Nexus</span>
            </div>
            <p class="mb-4">&copy; <span id="current-year"></span> Nexus Trading Platform. All rights reserved.</p>
            <div class="flex justify-center space-x-6 text-sm">
                <a href="#" class="hover:text-indigo-400 transition-colors duration-200">Privacy Policy</a>
                <a href="#" class="hover:text-indigo-400 transition-colors duration-200">Terms of Service</a>
                <a href="#" class="hover:text-indigo-400 transition-colors duration-200">Disclaimer</a>
            </div>
        </div>
    </footer>

    <!-- Register Modal -->
    <div id="register-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button class="modal-close-button" id="close-register-modal">&times;</button>
            <h2 class="text-3xl font-bold text-white text-center mb-6">Get Started with Nexus</h2>
            <form id="register-form" class="space-y-5">
                <div>
                    <label for="reg-email" class="block text-gray-300 text-sm font-bold mb-2">Email</label>
                    <input type="email" id="reg-email" name="email" class="shadow appearance-none border border-gray-700 rounded-lg w-full py-3 px-4 text-gray-200 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-700 input-glow" placeholder="your@example.com" required />
                </div>
                <div>
                    <label for="reg-username" class="block text-gray-300 text-sm font-bold mb-2">Username</label>
                    <input type="text" id="reg-username" name="username" class="shadow appearance-none border border-gray-700 rounded-lg w-full py-3 px-4 text-gray-200 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-700 input-glow" placeholder="Choose a username" required />
                </div>
                <div>
                    <label for="reg-password" class="block text-gray-300 text-sm font-bold mb-2">Password</label>
                    <input type="password" id="reg-password" name="password" class="shadow appearance-none border border-gray-700 rounded-lg w-full py-3 px-4 text-gray-200 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-700 input-glow" placeholder="Secure password" required />
                </div>
                <!-- Phone Number with Country Code Selector -->
                <div>
                    <label for="reg-phone-number" class="block text-gray-300 text-sm font-bold mb-2">Phone Number</label>
                    <div class="flex">
                        <select id="reg-country-code" class="shadow appearance-none border border-gray-700 rounded-l-lg py-3 px-2 text-gray-200 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-700 input-glow">
                            <option value="+1">+1 (USA/CAN)</option>
                            <option value="+44">+44 (UK)</option>
                            <option value="+234" selected>+234 (Nigeria)</option>
                            <option value="+49">+49 (Germany)</option>
                            <option value="+33">+33 (France)</option>
                            <option value="+81">+81 (Japan)</option>
                            <option value="+86">+86 (China)</option>
                            <option value="+91">+91 (India)</option>
                            <option value="+61">+61 (Australia)</option>
                            <option value="+55">+55 (Brazil)</option>
                            <option value="+27">+27 (South Africa)</option>
                        </select>
                        <input type="tel" id="reg-phone-number" name="phone" class="shadow appearance-none border border-gray-700 rounded-r-lg w-full py-3 px-4 text-gray-200 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-700 input-glow -ml-px" placeholder="e.g., 8012345678" />
                    </div>
                </div>
                <div class="text-center">
                    <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300 ease-in-out glow-on-hover w-full">
                        Register
                    </button>
                </div>
                <p class="text-center text-gray-400 text-sm mt-4">
                    Already have a Nexus account? <a href="#" id="show-login-modal-link" class="text-indigo-400 hover:underline">Login</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="login-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button class="modal-close-button" id="close-login-modal">&times;</button>
            <h2 class="text-3xl font-bold text-white text-center mb-6">Welcome Back!</h2>
            <form id="login-form" class="space-y-5">
                <div>
                    <label for="login-email-username" class="block text-gray-300 text-sm font-bold mb-2">Email or Username</label>
                    <input type="text" id="login-email-username" name="email_username" class="shadow appearance-none border border-gray-700 rounded-lg w-full py-3 px-4 text-gray-200 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-700 input-glow" placeholder="your@example.com or username" required />
                </div>
                <div>
                    <label for="login-password" class="block text-gray-300 text-sm font-bold mb-2">Password</label>
                    <input type="password" id="login-password" name="password" class="shadow appearance-none border border-gray-700 rounded-lg w-full py-3 px-4 text-gray-200 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-700 input-glow" placeholder="Your password" required />
                </div>
                <div class="text-center">
                    <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300 ease-in-out glow-on-hover w-full">
                        Login
                    </button>
                </div>
                <p class="text-center text-gray-400 text-sm mt-4">
                    Don't have an account? <a href="#" id="show-register-modal-link" class="text-indigo-400 hover:underline">Register</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Deposit Modal -->
    <div id="deposit-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button class="modal-close-button" id="close-deposit-modal">&times;</button>
            <h2 class="text-3xl font-bold text-white text-center mb-6">Deposit Funds</h2>
            <p class="text-gray-300 text-center mb-4">Your personalized wallet address:</p>
            <div class="bg-gray-800 p-4 rounded-lg flex items-center justify-between mb-6 border border-gray-700">
                <span id="wallet-address" class="text-indigo-400 text-sm md:text-base break-all">0xAbC123DeF456GhI789JkL012MnOPQ345RsT678UvW</span>
                <button id="copy-address-button" class="ml-4 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-md text-sm">
                    Copy
                </button>
            </div>
            <p class="text-gray-400 text-center text-sm">
                Please note: This is an example address for demonstration purposes only and cannot be used for actual transactions.
            </p>
        </div>
    </div>

    <!-- Dashboard Section -->
    <section id="dashboard-section" class="hidden min-h-screen bg-gray-950 text-white flex flex-col items-center justify-center py-20 px-4">
        <div class="text-center animate-fade-in-up w-full max-w-6xl mx-auto">
            <h2 class="text-5xl md:text-6xl font-extrabold text-indigo-400 mb-6">Welcome to Your Dashboard!</h2>
            <p class="text-lg md:text-xl text-gray-300 mb-8">
                This is your personalized trading hub. Start exploring your unified portfolio and advanced analytics.
            </p>

            <!-- Trading Analytics Section -->
            <div class="bg-gray-900 p-8 rounded-xl shadow-xl border border-gray-800 mb-8 animated-element delay-100">
                <h3 class="text-3xl font-bold text-white mb-6">Trading Analytics</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700">
                        <p class="text-gray-400 text-lg">Main Balance</p>
                        <p id="main-balance" class="text-indigo-400 text-4xl font-bold">$0.00</p>
                        <p class="text-gray-500 text-sm">Available funds</p>
                    </div>
                    <div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700">
                        <p class="text-gray-400 text-lg">Total Portfolio Value</p>
                        <p id="total-portfolio-value" class="text-green-400 text-4xl font-bold">$0.00</p>
                        <p class="text-gray-500 text-sm">Overall value</p>
                    </div>
                    <div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700">
                        <p class="text-gray-400 text-lg">Daily P&L</p>
                        <p id="daily-pnl" class="text-green-400 text-4xl font-bold">$0.00</p>
                        <p class="text-gray-500 text-sm">Last 24 hours</p>
                    </div>
                    <div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700">
                        <p class="text-gray-400 text-lg">Win Rate</p>
                        <p id="win-rate" class="text-indigo-400 text-4xl font-bold">N/A</p>
                        <p class="text-gray-500 text-sm">Overall trades</p>
                    </div>
                </div>
                <div class="mt-8">
                    <h4 class="text-2xl font-semibold text-white mb-4">Live Performance Chart</h4>
                    <div class="flex flex-col md:flex-row items-center justify-center mb-6 gap-4">
                        <label for="company-select" class="text-gray-300 text-lg">Select Company:</label>
                        <select id="company-select" class="bg-gray-700 border border-gray-600 text-white rounded-md py-2 px-4 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <option value="TSLA">Tesla (TSLA)</option>
                            <option value="KO">Coca-Cola (KO)</option>
                            <option value="AAPL">Apple (AAPL)</option>
                            <option value="SSNLF">Samsung (SSNLF)</option>
                            <option value="MSFT">Microsoft (MSFT)</option>
                            <option value="AMZN">Amazon (AMZN)</option>
                        </select>
                        <button id="fullscreen-chart-button" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-md shadow-md transition-colors duration-200">
                            <svg class="h-5 w-5 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4M4 20l5-5m11 5v-4m0 4h-4m4 0l-5-5"></path></svg>
                            Full Screen
                        </button>
                    </div>
                    <div id="chart-wrapper" class="bg-gray-800 p-4 rounded-lg flex items-center justify-center h-96 border border-gray-700 relative">
                        <canvas id="performanceChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Trade Actions Section -->
            <div class="bg-gray-900 p-8 rounded-xl shadow-xl border border-gray-800 mb-8 animated-element delay-200">
                <h3 class="text-3xl font-bold text-white mb-6">Trade Actions</h3>
                <div class="flex flex-col md:flex-row items-center justify-center gap-4">
                    <input type="number" id="trade-amount" placeholder="Amount to trade (USD)" min="1" class="w-full md:w-auto flex-grow bg-gray-700 border border-gray-600 text-white rounded-md py-3 px-4 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-glow" />
                    <button id="buy-button" class="w-full md:w-auto bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300 ease-in-out">
                        Buy
                    </button>
                    <button id="sell-button" class="w-full md:w-auto bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300 ease-in-out">
                        Sell
                    </button>
                </div>
            </div>

            <!-- Company Stocks Section -->
            <div class="bg-gray-900 p-8 rounded-xl shadow-xl border border-gray-800 mb-8 animated-element delay-300">
                <h3 class="text-3xl font-bold text-white mb-6">Company Stocks</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Tesla -->
                    <div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700 flex items-center">
                        <img src="https://placehold.co/40x40/FF4500/FFFFFF?text=TSLA" alt="Tesla Logo" class="h-10 w-10 mr-4 rounded-full">
                        <div>
                            <p class="text-white text-xl font-semibold">Tesla (TSLA)</p>
                            <p class="text-green-400 text-lg">$180.50 <span class="text-sm text-gray-500">(+1.2%)</span></p>
                        </div>
                    </div>
                    <!-- Coca-Cola -->
                    <div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700 flex items-center">
                        <img src="https://placehold.co/40x40/FF0000/FFFFFF?text=KO" alt="Coca-Cola Logo" class="h-10 w-10 mr-4 rounded-full">
                        <div>
                            <p class="text-white text-xl font-semibold">Coca-Cola (KO)</p>
                            <p class="text-red-400 text-lg">$60.15 <span class="text-sm text-gray-500">(-0.5%)</span></p>
                        </div>
                    </div>
                    <!-- Apple -->
                    <div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700 flex items-center">
                        <img src="https://placehold.co/40x40/A2AAAD/FFFFFF?text=AAPL" alt="Apple Logo" class="h-10 w-10 mr-4 rounded-full">
                        <div>
                            <p class="text-white text-xl font-semibold">Apple (AAPL)</p>
                            <p class="text-green-400 text-lg">$175.80 <span class="text-sm text-gray-500">(+0.8%)</span></p>
                        </div>
                    </div>
                    <!-- Samsung -->
                    <div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700 flex items-center">
                        <img src="https://placehold.co/40x40/123456/FFFFFF?text=SSNLF" alt="Samsung Logo" class="h-10 w-10 mr-4 rounded-full">
                        <div>
                            <p class="text-white text-xl font-semibold">Samsung (SSNLF)</p>
                            <p class="text-green-400 text-lg">$1200.00 <span class="text-sm text-gray-500">(+0.3%)</span></p>
                        </div>
                    </div>
                    <!-- Microsoft -->
                    <div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700 flex items-center">
                        <img src="https://placehold.co/40x40/0078D4/FFFFFF?text=MSFT" alt="Microsoft Logo" class="h-10 w-10 mr-4 rounded-full">
                        <div>
                            <p class="text-white text-xl font-semibold">Microsoft (MSFT)</p>
                            <p class="text-green-400 text-lg">$450.20 <span class="text-sm text-gray-500">(+1.5%)</span></p>
                        </div>
                    </div>
                    <!-- Amazon -->
                    <div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700 flex items-center">
                        <img src="https://placehold.co/40x40/FF9900/FFFFFF?text=AMZN" alt="Amazon Logo" class="h-10 w-10 mr-4 rounded-full">
                        <div>
                            <p class="text-white text-xl font-semibold">Amazon (AMZN)</p>
                            <p class="text-red-400 text-lg">$185.70 <span class="text-sm text-gray-500">(-0.7%)</span></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Action Buttons -->
            <div class="flex flex-wrap justify-center gap-4 mt-10">
                <button id="deposit-button" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300 ease-in-out glow-on-hover">
                    Deposit Funds
                </button>
                <button id="logout-button" class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300 ease-in-out glow-on-hover">
                    Logout
                </button>
            </div>
        </div>
    </section>

    <!-- Fullscreen Chart Overlay (hidden by default) -->
    <div id="fullscreen-chart-overlay" class="fullscreen-chart-container hidden">
        <div class="relative w-full h-full flex flex-col items-center justify-center">
            <canvas id="fullscreenPerformanceChart"></canvas>
            <!-- Mobile Exit Button -->
            <button id="exit-fullscreen-mobile" class="absolute top-4 right-4 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full shadow-lg z-20 md:hidden">
                &times; Close
            </button>
            <!-- PC Exit Instruction -->
            <p id="exit-fullscreen-pc" class="absolute bottom-4 text-gray-400 text-lg hidden md:block z-20">
                Press <span class="font-bold text-white">ESC</span> to exit full screen
            </p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set current year in footer
            document.getElementById('current-year').textContent = (new Date).getFullYear();

            // Navbar scroll effect
            const navbar = document.getElementById('navbar');
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    navbar.classList.add('bg-gray-900/90', 'backdrop-blur-md', 'shadow-lg');
                    navbar.classList.remove('bg-transparent');
                } else {
                    navbar.classList.remove('bg-gray-900/90', 'backdrop-blur-md', 'shadow-lg');
                    navbar.classList.add('bg-transparent');
                }
            });

            // Mobile menu toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const menuIconOpen = document.getElementById('menu-icon-open');
            const menuIconClose = document.getElementById('menu-icon-close');
            const mobileMenuLinks = document.querySelectorAll('.mobile-menu-link');

            mobileMenuButton.addEventListener('click', function() {
                mobileMenu.classList.toggle('hidden');
                menuIconOpen.classList.toggle('hidden');
                menuIconClose.classList.toggle('hidden');
            });

            mobileMenuLinks.forEach(link => {
                link.addEventListener('click', function() {
                    mobileMenu.classList.add('hidden');
                    menuIconOpen.classList.remove('hidden');
                    menuIconClose.classList.add('hidden');
                });
            });

            // Close mobile menu on resize if wider than md
            window.addEventListener('resize', function() {
                if (window.innerWidth >= 768) {
                    mobileMenu.classList.add('hidden');
                    menuIconOpen.classList.remove('hidden');
                    menuIconClose.classList.add('hidden');
                }
            });

            // Intersection Observer for animated elements
            const animatedElements = document.querySelectorAll('.animated-element');
            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.1
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            animatedElements.forEach(element => {
                observer.observe(element);
            });

            // Learn More button scroll
            const learnMoreButton = document.getElementById('learn-more-button');
            if (learnMoreButton) {
                learnMoreButton.addEventListener('click', function() {
                    const featuresSection = document.getElementById('features');
                    if (featuresSection) {
                        featuresSection.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            }

            // Modal elements
            const getStartedButton = document.getElementById('get-started-button');
            const registerModal = document.getElementById('register-modal');
            const closeRegisterModal = document.getElementById('close-register-modal');
            const loginModal = document.getElementById('login-modal');
            const closeLoginModal = document.getElementById('close-login-modal');
            const showLoginModalLink = document.getElementById('show-login-modal-link');
            const showRegisterModalLink = document.getElementById('show-register-modal-link');
            const depositButton = document.getElementById('deposit-button');
            const depositModal = document.getElementById('deposit-modal');
            const closeDepositModal = document.getElementById('close-deposit-modal');
            const copyAddressButton = document.getElementById('copy-address-button');
            const walletAddressSpan = document.getElementById('wallet-address');

            // Form elements
            const registerForm = document.getElementById('register-form');
            const loginForm = document.getElementById('login-form');

            // Section elements
            const mainContent = document.getElementById('main-content');
            const dashboardSection = document.getElementById('dashboard-section');
            const logoutButton = document.getElementById('logout-button');

            // Dashboard value elements
            const mainBalanceSpan = document.getElementById('main-balance'); // New
            const totalPortfolioValueSpan = document.getElementById('total-portfolio-value');
            const dailyPnlSpan = document.getElementById('daily-pnl');
            const winRateSpan = document.getElementById('win-rate');

            // Trade action elements
            const tradeAmountInput = document.getElementById('trade-amount');
            const buyButton = document.getElementById('buy-button');
            const sellButton = document.getElementById('sell-button');

            // Chart elements
            const companySelect = document.getElementById('company-select');
            const chartWrapper = document.getElementById('chart-wrapper');
            const fullscreenChartButton = document.getElementById('fullscreen-chart-button');
            const fullscreenChartOverlay = document.getElementById('fullscreen-chart-overlay');
            const exitFullscreenMobileButton = document.getElementById('exit-fullscreen-mobile');
            const exitFullscreenPcText = document.getElementById('exit-fullscreen-pc');

            let performanceChart = null; // To hold the Chart.js instance
            let fullscreenPerformanceChart = null; // To hold the fullscreen Chart.js instance
            let chartUpdateInterval = null; // To hold the interval for real-time updates
            let dailyPerformanceInterval = null; // To hold the interval for daily performance updates

            // Function to show a modal
            function showModal(modalElement) {
                modalElement.classList.remove('hidden');
                modalElement.classList.remove('closing'); // Ensure closing animation is reset
                document.body.style.overflow = 'hidden'; // Prevent scrolling background
            }

            // Function to hide a modal
            function hideModal(modalElement) {
                modalElement.classList.add('closing'); // Add closing animation class
                modalElement.addEventListener('animationend', function handler() {
                    modalElement.classList.add('hidden');
                    modalElement.classList.remove('closing');
                    document.body.style.overflow = ''; // Restore scrolling
                    modalElement.removeEventListener('animationend', handler); // Remove listener to prevent multiple calls
                });
                // Fallback: Ensure modal is hidden even if animationend doesn't fire reliably
                setTimeout(() => {
                    if (!modalElement.classList.contains('hidden')) {
                        modalElement.classList.add('hidden');
                        modalElement.classList.remove('closing');
                        document.body.style.overflow = '';
                    }
                }, 350); // Slightly longer than modalFadeOut animation duration (0.3s)
            }

            // Show register modal
            getStartedButton.addEventListener('click', () => showModal(registerModal));
            closeRegisterModal.addEventListener('click', () => hideModal(registerModal));

            // Show login modal
            closeLoginModal.addEventListener('click', () => hideModal(loginModal));

            // Switch between register and login modals
            showLoginModalLink.addEventListener('click', function(e) {
                e.preventDefault();
                hideModal(registerModal);
                setTimeout(() => showModal(loginModal), 200); // Delay for smooth transition
            });

            showRegisterModalLink.addEventListener('click', function(e) {
                e.preventDefault();
                hideModal(loginModal);
                setTimeout(() => showModal(registerModal), 200); // Delay for smooth transition
            });

            // Show deposit modal
            depositButton.addEventListener('click', () => showModal(depositModal));
            closeDepositModal.addEventListener('click', () => {
                hideModal(depositModal);
                // Set deposit made flag when deposit modal is closed
                localStorage.setItem('hasMadeDeposit', 'true');
                // Initialize portfolio values if this is the first deposit
                const currentPortfolio = getPortfolio();
                if (currentPortfolio.currentBalance === 0) {
                    setPortfolio(5000, 0, 0, 0, 0); // Start with a base of $5000 for demonstration
                }
                updateDashboardAnalytics(); // Update analytics after deposit interaction
                startDailyPerformanceSimulation(); // Start daily simulation after deposit
            });

            // Copy wallet address to clipboard
            copyAddressButton.addEventListener('click', function() {
                const walletAddress = walletAddressSpan.textContent;
                const tempInput = document.createElement('textarea'); // Use textarea for better mobile compatibility
                tempInput.value = walletAddress;
                document.body.appendChild(tempInput);
                tempInput.select();
                document.execCommand('copy'); // Deprecated but widely supported for iframes
                document.body.removeChild(tempInput);
                alertMessage('Wallet address copied to clipboard!', 'success');
                localStorage.setItem('hasMadeDeposit', 'true'); // Set deposit made flag
                // Initialize portfolio values if this is the first deposit
                const currentPortfolio = getPortfolio();
                if (currentPortfolio.currentBalance === 0) {
                    setPortfolio(5000, 0, 0, 0, 0); // Start with a base of $5000 for demonstration
                }
                updateDashboardAnalytics(); // Update analytics after copy
                hideModal(depositModal); // Close modal after copying
                startDailyPerformanceSimulation(); // Start daily simulation after deposit
            });

            // Custom alert/message box (replace console.log and native alerts)
            function alertMessage(message, type = 'info') {
                const messageBox = document.createElement('div');
                // Use new animation classes for messages
                messageBox.className = `fixed bottom-4 right-4 p-4 rounded-lg shadow-lg text-white z-[1001] message-box-animate-in`;
                if (type === 'success') {
                    messageBox.classList.add('bg-green-600');
                } else if (type === 'error') {
                    messageBox.classList.add('bg-red-600');
                } else {
                    messageBox.classList.add('bg-indigo-600');
                }
                messageBox.textContent = message;
                document.body.appendChild(messageBox);

                // Make it disappear after a few seconds with animation
                setTimeout(() => {
                    messageBox.classList.add('message-box-animate-out'); // Add fade-out animation class
                    messageBox.addEventListener('animationend', function handler() {
                        messageBox.remove(); // Remove element after animation
                        messageBox.removeEventListener('animationend', handler); // Clean up listener
                    });
                }, 3000); // Message visible for 3 seconds before fading out
            }

            // --- Portfolio Management using LocalStorage ---
            function getPortfolio() {
                const portfolio = JSON.parse(localStorage.getItem('userPortfolio')) || {
                    currentBalance: 0, // This is the main balance / total portfolio value
                    dailyPL: 0,
                    winRate: 0,
                    lastTradeResult: null, // 'win' or 'loss' for win rate calculation
                    totalTrades: 0,
                    winningTrades: 0
                };
                return portfolio;
            }

            function setPortfolio(currentBalance, dailyPL, winRate, totalTrades, winningTrades, lastTradeResult = null) {
                const portfolio = getPortfolio();
                portfolio.currentBalance = parseFloat(currentBalance.toFixed(2));
                portfolio.dailyPL = parseFloat(dailyPL.toFixed(2));
                portfolio.winRate = parseFloat(winRate.toFixed(2)); // Ensure winRate is a number
                portfolio.totalTrades = totalTrades;
                portfolio.winningTrades = winningTrades;

                if (lastTradeResult !== null) {
                    portfolio.totalTrades++;
                    if (lastTradeResult === 'win') {
                        portfolio.winningTrades++;
                    }
                    portfolio.winRate = portfolio.totalTrades > 0 ? (portfolio.winningTrades / portfolio.totalTrades * 100).toFixed(2) : 0;
                }
                localStorage.setItem('userPortfolio', JSON.stringify(portfolio));
            }

            // Function to update dashboard analytics based on deposit status and portfolio
            function updateDashboardAnalytics() {
                const hasMadeDeposit = localStorage.getItem('hasMadeDeposit') === 'true';
                const portfolio = getPortfolio();

                if (hasMadeDeposit && portfolio.currentBalance > 0) {
                    mainBalanceSpan.textContent = `$${portfolio.currentBalance.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
                    totalPortfolioValueSpan.textContent = `$${portfolio.currentBalance.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
                    dailyPnlSpan.textContent = `${portfolio.dailyPL >= 0 ? '+' : '-'}$${Math.abs(portfolio.dailyPL).toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
                    dailyPnlSpan.classList.toggle('text-green-400', portfolio.dailyPL >= 0);
                    dailyPnlSpan.classList.toggle('text-red-400', portfolio.dailyPL < 0);
                    winRateSpan.textContent = `${portfolio.winRate}%`;
                } else {
                    mainBalanceSpan.textContent = '$0.00';
                    totalPortfolioValueSpan.textContent = '$0.00';
                    dailyPnlSpan.textContent = '$0.00';
                    dailyPnlSpan.classList.remove('text-green-400', 'text-red-400');
                    winRateSpan.textContent = 'N/A';
                }
            }

            // --- Chart.js Integration ---
            const companyChartData = {
                'TSLA': {
                    label: 'Tesla (TSLA)',
                    data: [170, 172, 171, 175, 178, 180, 182, 180, 183, 185, 182, 180, 181, 180.50],
                    borderColor: 'rgb(255, 69, 0)', // Orange-red
                    backgroundColor: 'rgba(255, 69, 0, 0.2)'
                },
                'KO': {
                    label: 'Coca-Cola (KO)',
                    data: [58, 59, 60, 61, 60.5, 60.15, 59.8, 60.2, 60.5, 60.1, 59.9, 60.15],
                    borderColor: 'rgb(255, 0, 0)', // Red
                    backgroundColor: 'rgba(255, 0, 0, 0.2)'
                },
                'AAPL': {
                    label: 'Apple (AAPL)',
                    data: [170, 171, 172, 173, 174, 175, 175.5, 175.8, 175.2, 176, 176.5, 175.80],
                    borderColor: 'rgb(162, 170, 173)', // Grey
                    backgroundColor: 'rgba(162, 170, 173, 0.2)'
                },
                'SSNLF': {
                    label: 'Samsung (SSNLF)',
                    data: [1190, 1195, 1200, 1205, 1202, 1200, 1198, 1201, 1203, 1200, 1200.5, 1200.00],
                    borderColor: 'rgb(18, 52, 86)', // Dark Blue
                    backgroundColor: 'rgba(18, 52, 86, 0.2)'
                },
                'MSFT': {
                    label: 'Microsoft (MSFT)',
                    data: [440, 442, 445, 448, 450, 452, 450.5, 451, 450.2, 450.8, 451.5, 450.20],
                    borderColor: 'rgb(0, 120, 212)', // Microsoft Blue
                    backgroundColor: 'rgba(0, 120, 212, 0.2)'
                },
                'AMZN': {
                    label: 'Amazon (AMZN)',
                    data: [180, 182, 185, 188, 187, 186, 185.5, 185.7, 184.9, 185.2, 185.70],
                    borderColor: 'rgb(255, 153, 0)', // Amazon Orange
                    backgroundColor: 'rgba(255, 153, 0, 0.2)'
                }
            };

            // Function to generate time labels for the chart
            function generateTimeLabels(numPoints) {
                const labels = [];
                const now = new Date();
                for (let i = numPoints - 1; i >= 0; i--) {
                    const date = new Date(now.getTime() - i * 5 * 1000); // 5 seconds interval
                    labels.push(date.toLocaleTimeString());
                }
                return labels;
            }

            // Function to initialize the chart
            function initializeChart(canvasId, companyCode) {
                const ctx = document.getElementById(canvasId).getContext('2d');
                const initialData = companyChartData[companyCode];
                const labels = generateTimeLabels(initialData.data.length);

                // Destroy existing chart instance if any on this canvas
                let chartToDestroy = null;
                if (canvasId === 'performanceChart' && performanceChart) {
                    chartToDestroy = performanceChart;
                } else if (canvasId === 'fullscreenPerformanceChart' && fullscreenPerformanceChart) {
                    chartToDestroy = fullscreenPerformanceChart;
                }

                if (chartToDestroy) {
                    chartToDestroy.destroy();
                }

                const newChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: initialData.label,
                            data: [...initialData.data], // Use a copy of the data
                            borderColor: initialData.borderColor,
                            backgroundColor: initialData.backgroundColor,
                            borderWidth: 2,
                            tension: 0.3, // Smooth lines
                            pointRadius: 0, // No points
                            fill: true, // Fill area under the line
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: true,
                                labels: {
                                    color: '#e0e0e0', // Legend text color
                                    font: {
                                        size: 14
                                    }
                                }
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                backgroundColor: 'rgba(26, 32, 44, 0.8)', // Darker background for tooltips
                                titleColor: '#e0e0e0',
                                bodyColor: '#e0e0e0',
                                borderColor: '#4f46e5',
                                borderWidth: 1,
                                displayColors: false,
                            }
                        },
                        scales: {
                            x: {
                                type: 'category', // Use 'category' for time strings
                                ticks: {
                                    color: '#a0a0a0', // X-axis tick color
                                    maxRotation: 0,
                                    minRotation: 0,
                                    autoSkip: true,
                                    maxTicksLimit: 6 // Limit number of ticks for cleaner look
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.05)' // Grid line color
                                }
                            },
                            y: {
                                ticks: {
                                    color: '#a0a0a0', // Y-axis tick color
                                    callback: function(value) {
                                        return '$' + value.toFixed(2); // Format Y-axis labels as currency
                                    }
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.05)' // Grid line color
                                }
                            }
                        }
                    }
                });

                if (canvasId === 'performanceChart') {
                    performanceChart = newChart;
                } else if (canvasId === 'fullscreenPerformanceChart') {
                    fullscreenPerformanceChart = newChart;
                }
                return newChart;
            }

            // Function to update chart data (simulate real-time)
            function updateChartData() {
                const currentCompanyCode = companySelect.value;
                const initialData = companyChartData[currentCompanyCode];

                // Update the main chart
                if (performanceChart) {
                    const currentData = performanceChart.data.datasets[0].data;
                    const currentLabels = performanceChart.data.labels;
                    const lastValue = currentData[currentData.length - 1] || initialData.data[initialData.data.length - 1];
                    const newValue = lastValue + (Math.random() * 2 - 1) * (lastValue * 0.005); // +/- 0.5% fluctuation
                    const newTimeLabel = new Date().toLocaleTimeString();

                    currentData.push(parseFloat(newValue.toFixed(2)));
                    currentLabels.push(newTimeLabel);

                    if (currentData.length > 20) { // Keep a fixed number of data points (e.g., 20)
                        currentData.shift();
                        currentLabels.shift();
                    }
                    performanceChart.update();
                }

                // Update the fullscreen chart if it exists
                if (fullscreenPerformanceChart) {
                    const currentData = fullscreenPerformanceChart.data.datasets[0].data;
                    const currentLabels = fullscreenPerformanceChart.data.labels;
                    const lastValue = currentData[currentData.length - 1] || initialData.data[initialData.data.length - 1];
                    const newValue = lastValue + (Math.random() * 2 - 1) * (lastValue * 0.005); // +/- 0.5% fluctuation
                    const newTimeLabel = new Date().toLocaleTimeString();

                    currentData.push(parseFloat(newValue.toFixed(2)));
                    currentLabels.push(newTimeLabel);

                    if (currentData.length > 20) { // Keep a fixed number of data points (e.g., 20)
                        currentData.shift();
                        currentLabels.shift();
                    }
                    fullscreenPerformanceChart.update();
                }
            }

            // Event listener for company selection change
            companySelect.addEventListener('change', function() {
                const selectedCompany = this.value;
                initializeChart('performanceChart', selectedCompany);
                if (document.fullscreenElement) { // If already in fullscreen, re-initialize that too
                    initializeChart('fullscreenPerformanceChart', selectedCompany);
                }
                // Reset and restart the real-time update interval for the new company
                clearInterval(chartUpdateInterval);
                chartUpdateInterval = setInterval(updateChartData, 2000); // Update every 2 seconds
            });

            // Function to start/stop chart updates based on dashboard visibility
            function toggleChartUpdates(start) {
                if (start) {
                    if (!performanceChart) { // Initialize main chart if not already
                        initializeChart('performanceChart', companySelect.value);
                    }
                    if (!chartUpdateInterval) { // Start interval if not already running
                        chartUpdateInterval = setInterval(updateChartData, 2000); // Update every 2 seconds
                    }
                } else {
                    clearInterval(chartUpdateInterval);
                    chartUpdateInterval = null;
                }
            }

            // --- Fullscreen Logic ---
            fullscreenChartButton.addEventListener('click', () => {
                if (chartWrapper.requestFullscreen) {
                    chartWrapper.requestFullscreen();
                } else if (chartWrapper.mozRequestFullScreen) { /* Firefox */
                    chartWrapper.mozRequestFullScreen();
                } else if (chartWrapper.webkitRequestFullscreen) { /* Chrome, Safari & Opera */
                    chartWrapper.webkitRequestFullscreen();
                } else if (chartWrapper.msRequestFullscreen) { /* IE/Edge */
                    chartWrapper.msRequestFullscreen();
                }
            });

            // Handle fullscreen change events
            document.addEventListener('fullscreenchange', handleFullscreenChange);
            document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
            document.addEventListener('mozfullscreenchange', handleFullscreenChange);
            document.addEventListener('MSFullscreenChange', handleFullscreenChange);

            function handleFullscreenChange() {
                if (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement) {
                    // Entered fullscreen
                    fullscreenChartOverlay.classList.remove('hidden');
                    // Move the canvas to the fullscreen overlay
                    const originalCanvas = document.getElementById('performanceChart');
                    const fullscreenCanvas = document.getElementById('fullscreenPerformanceChart');
                    const selectedCompany = companySelect.value;

                    // Re-initialize chart on the fullscreen canvas with the current data
                    initializeChart('fullscreenPerformanceChart', selectedCompany);
                    // Copy current data from the main chart to the fullscreen chart if available
                    if (performanceChart && fullscreenPerformanceChart) {
                        fullscreenPerformanceChart.data.labels = [...performanceChart.data.labels];
                        fullscreenPerformanceChart.data.datasets[0].data = [...performanceChart.data.datasets[0].data];
                        fullscreenPerformanceChart.update();
                    }

                    // Show appropriate exit message/button
                    if (window.innerWidth < 768) { // Simple check for mobile
                        exitFullscreenMobileButton.classList.remove('hidden');
                        exitFullscreenPcText.classList.add('hidden');
                    } else {
                        exitFullscreenMobileButton.classList.add('hidden');
                        exitFullscreenPcText.classList.remove('hidden');
                    }

                } else {
                    // Exited fullscreen
                    fullscreenChartOverlay.classList.add('hidden');
                    // Destroy the fullscreen chart instance
                    if (fullscreenPerformanceChart) {
                        fullscreenPerformanceChart.destroy();
                        fullscreenPerformanceChart = null;
                    }
                    // Re-initialize the main chart to ensure it's correctly rendered
                    initializeChart('performanceChart', companySelect.value);
                }
            }

            exitFullscreenMobileButton.addEventListener('click', () => {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.mozCancelFullScreen) { /* Firefox */
                    document.mozCancelFullScreen();
                } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE/Edge */
                    document.msExitFullscreen();
                }
            });

            // --- Trading Logic ---
            buyButton.addEventListener('click', () => simulateTrade('buy'));
            sellButton.addEventListener('click', () => simulateTrade('sell'));

            function simulateTrade(type) {
                const hasMadeDeposit = localStorage.getItem('hasMadeDeposit') === 'true';
                let portfolio = getPortfolio();

                if (!hasMadeDeposit || portfolio.currentBalance <= 0) {
                    alertMessage('Please deposit funds to enable trading.', 'error');
                    return;
                }

                const amount = parseFloat(tradeAmountInput.value);
                if (isNaN(amount) || amount <= 0) {
                    alertMessage('Please enter a valid trade amount.', 'error');
                    return;
                }

                const currentCompanyCode = companySelect.value;
                const companyData = companyChartData[currentCompanyCode];
                if (!companyData || !performanceChart) {
                    alertMessage('Please select a company.', 'error');
                    return;
                }

                const currentPrice = performanceChart.data.datasets[0].data[performanceChart.data.datasets[0].data.length - 1];
                if (!currentPrice) {
                    alertMessage('Could not get current price for trading.', 'error');
                    return;
                }

                let tradeResult = null;
                let profitLoss = 0;

                if (type === 'buy') {
                    if (portfolio.currentBalance < amount) {
                        alertMessage('Insufficient funds to place this buy order.', 'error');
                        return;
                    }
                    // Deduct amount from balance
                    portfolio.currentBalance -= amount;

                    // Simulate a small random immediate profit/loss for the trade itself
                    const initialChange = (Math.random() * 0.02 - 0.01); // +/- 1% immediate change
                    profitLoss = amount * initialChange;
                    portfolio.currentBalance += profitLoss; // Apply immediate P/L to balance
                    portfolio.dailyPL += profitLoss; // Reflect in daily P&L

                    tradeResult = profitLoss >= 0 ? 'win' : 'loss';
                    alertMessage(`Bought $${amount.toFixed(2)} of ${currentCompanyCode}. Immediate P/L: $${profitLoss.toFixed(2)}`, profitLoss >= 0 ? 'success' : 'error');

                } else if (type === 'sell') {
                    // For simplicity, assume user always has 'shares' to sell worth the amount
                    // In a real app, you'd track owned shares per company
                    // Add amount back to balance
                    portfolio.currentBalance += amount;

                    // Simulate a small random immediate profit/loss for the trade itself
                    const initialChange = (Math.random() * 0.02 - 0.01); // +/- 1% immediate change
                    profitLoss = amount * initialChange; // Selling also results in P/L based on movement
                    portfolio.currentBalance += profitLoss; // Apply immediate P/L to balance
                    portfolio.dailyPL += profitLoss; // Reflect in daily P&L

                    tradeResult = profitLoss >= 0 ? 'win' : 'loss';
                    alertMessage(`Sold $${amount.toFixed(2)} of ${currentCompanyCode}. Immediate P/L: $${profitLoss.toFixed(2)}`, profitLoss >= 0 ? 'success' : 'error');
                }

                setPortfolio(portfolio.currentBalance, portfolio.dailyPL, portfolio.winRate, portfolio.totalTrades, portfolio.winningTrades, tradeResult);
                updateDashboardAnalytics();
                tradeAmountInput.value = ''; // Clear input
            }

            // --- Daily Performance Simulation (Money Adding Daily) ---
            function simulateDailyPerformance() {
                const hasMadeDeposit = localStorage.getItem('hasMadeDeposit') === 'true';
                let portfolio = getPortfolio();

                if (!hasMadeDeposit || portfolio.currentBalance <= 0) {
                    // If no deposit or portfolio is zero, ensure daily P&L is reset for a new 'day'
                    if (portfolio.dailyPL !== 0 || portfolio.totalTrades > 0) { // Only reset if there was activity
                         setPortfolio(0, 0, 0, 0, 0); // Reset all portfolio stats
                         updateDashboardAnalytics();
                    }
                    return;
                }

                const currentCompanyCode = companySelect.value;
                const companyData = companyChartData[currentCompanyCode];

                if (!companyData || !performanceChart) {
                    // Cannot simulate without chart data
                    return;
                }

                const chartData = performanceChart.data.datasets[0].data;
                if (chartData.length < 2) { // Need at least 2 points to calculate percentage change
                    return;
                }

                // Calculate a daily change based on a recent chart movement average
                const lastPrice = chartData[chartData.length - 1];
                const prevPrice = chartData[chartData.length - 2];
                const percentageChange = (lastPrice - prevPrice) / prevPrice;

                // Apply this percentage change to a portion of the portfolio value
                // For simplicity, let's say 100% of portfolio value reacts to daily moves for this demo
                // This means currentBalance acts as the total portfolio value that grows/shrinks
                const dailyProfitLoss = portfolio.currentBalance * percentageChange * (Math.random() * 0.5 + 0.75); // Add some randomness

                portfolio.currentBalance += dailyProfitLoss;
                portfolio.dailyPL += dailyProfitLoss; // Accumulate daily P&L

                setPortfolio(portfolio.currentBalance, portfolio.dailyPL, portfolio.winRate, portfolio.totalTrades, portfolio.winningTrades);
                updateDashboardAnalytics();
            }

            function startDailyPerformanceSimulation() {
                if (dailyPerformanceInterval) {
                    clearInterval(dailyPerformanceInterval); // Clear existing interval if any
                }
                // Run daily performance simulation periodically (e.g., every 5 seconds for demo)
                dailyPerformanceInterval = setInterval(simulateDailyPerformance, 5000);
            }

            // Function to switch to dashboard view
            function showDashboard() {
                mainContent.classList.add('hidden');
                dashboardSection.classList.remove('hidden');
                // Trigger animations for dashboard elements
                dashboardSection.querySelectorAll('.animated-element').forEach(el => {
                    el.classList.add('is-visible');
                });
                window.scrollTo(0, 0); // Scroll to top of dashboard
                updateDashboardAnalytics(); // Update analytics when dashboard is shown
                toggleChartUpdates(true); // Start chart updates when dashboard is visible
                startDailyPerformanceSimulation(); // Start daily simulation when dashboard is visible
            }

            // Function to switch back to main content view
            function showMainContent() {
                dashboardSection.classList.add('hidden');
                mainContent.classList.remove('hidden');
                window.scrollTo(0, 0); // Scroll to top of main content
                toggleChartUpdates(false); // Stop chart updates when leaving dashboard
                clearInterval(dailyPerformanceInterval); // Stop daily simulation
                dailyPerformanceInterval = null;
                // Ensure fullscreen is exited if user logs out while in fullscreen
                if (document.fullscreenElement) {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    } else if (document.mozCancelFullScreen) {
                        document.mozCancelFullScreen();
                    } else if (document.webkitExitFullscreen) {
                        document.webkitExitFullscreen();
                    } else if (document.msExitFullscreen) {
                        document.msExitFullscreen();
                    }
                }
                 // Reset portfolio values when logging out
                localStorage.removeItem('userPortfolio');
                localStorage.removeItem('hasMadeDeposit');
                updateDashboardAnalytics(); // Refresh display to show zeros
            }

            // --- Local Storage User Management ---

            // Check if user is already logged in on page load
            function checkLoginStatus() {
                const loggedInUser = localStorage.getItem('loggedInUser');
                if (loggedInUser) {
                    showDashboard();
                    alertMessage(`Welcome back, ${loggedInUser}!`, 'success');
                }
            }
            checkLoginStatus(); // Call on DOMContentLoaded

            // Register form submission
            registerForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('reg-email').value;
                const username = document.getElementById('reg-username').value;
                const password = document.getElementById('reg-password').value;
                const countryCode = document.getElementById('reg-country-code').value;
                const phoneNumber = document.getElementById('reg-phone-number').value;
                const fullPhoneNumber = countryCode + phoneNumber;

                // Basic validation
                if (!email || !username || !password || !phoneNumber) {
                    alertMessage('Please fill in all registration fields.', 'error');
                    return;
                }

                // Check if user already exists
                const users = JSON.parse(localStorage.getItem('users')) || [];
                const userExists = users.some(user => user.email === email || user.username === username);

                if (userExists) {
                    alertMessage('User with this email or username already exists.', 'error');
                    return;
                }

                const newUser = { email, username, password, phone: fullPhoneNumber };
                users.push(newUser);
                localStorage.setItem('users', JSON.stringify(users));
                localStorage.setItem('loggedInUser', username); // Auto-login after registration
                localStorage.setItem('hasMadeDeposit', 'false'); // Initialize deposit flag for new user
                localStorage.setItem('userPortfolio', JSON.stringify({ // Initialize empty portfolio
                    currentBalance: 0,
                    dailyPL: 0,
                    winRate: 0,
                    lastTradeResult: null,
                    totalTrades: 0,
                    winningTrades: 0
                }));

                alertMessage('Registration successful! Welcome to Nexus.', 'success');
                hideModal(registerModal);
                showDashboard();
            });

            // Login form submission
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const emailUsername = document.getElementById('login-email-username').value;
                const password = document.getElementById('login-password').value;

                const users = JSON.parse(localStorage.getItem('users')) || [];
                const user = users.find(u => (u.email === emailUsername || u.username === emailUsername) && u.password === password);

                if (user) {
                    localStorage.setItem('loggedInUser', user.username); // Store username for display
                    alertMessage(`Login successful! Welcome, ${user.username}.`, 'success');
                    hideModal(loginModal);
                    showDashboard();
                } else {
                    alertMessage('Invalid email/username or password.', 'error');
                }
            });

            // Logout button
            logoutButton.addEventListener('click', function() {
                localStorage.removeItem('loggedInUser'); // Clear logged in user
                localStorage.removeItem('userPortfolio'); // Clear portfolio data
                localStorage.removeItem('hasMadeDeposit'); // Reset deposit status
                alertMessage('You have been logged out.', 'info');
                showMainContent();
            });

            // Initial update of dashboard analytics when the script loads
            updateDashboardAnalytics();
        });
    </script>
</body>
</html>
